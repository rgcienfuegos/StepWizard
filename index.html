<!doctype html>
<html lang="en">

<head>
  <title>jQuery Smart Wizard - The awesome jQuery step wizard plugin</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Include Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

  <!-- Include SmartWizard CSS -->
  <link href="./css/smart_wizard_arrows.min.css" rel="stylesheet" type="text/css" />

  <!-- Demo Page Style - You don't need -->
  <style>
    body {
      padding-right: 5%;
      padding-left: 5%;
    }
  </style>

</head>

<body>

  <br />
  <div class="container mt-5 mb-5">   


    <!-- SmartWizard html -->
    <div id="smartwizard">

      <ul class="nav">
        <li class="nav-item">
          <a class="nav-link" href="#step-1">
            <strong>Step 1</strong> <br>Descripcion paso 1
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#step-2">
            <strong>Step 2</strong> <br>Descripcion paso 2
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#step-3">
            <strong>Step 3</strong> <br>Descripcion paso 3
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="#step-4">
            <strong>Step 4</strong> <br>Descripcion paso 4
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link " href="#step-5">
            <strong>Step 5</strong> <br>Descripcion paso 5
          </a>
        </li>
      </ul>



      <br /><label><b> Total Amount</b></label>
      <input name="totamount" id="totamount" type="number" readonly>


      <div class="tab-content">

        <div id="step-1">
          <form action="" id="my-form0"  accept-charset="utf-8">
            <div class="form-group">
              <label id="name-label" for="name">Nombre</label>
              <input type="text" name="name" id="name" class="form-control w-50" placeholder="Introduce tu nombre" required>
              <div class="help-block with-errors"></div>
              <label for="value0">Coste </label>';
              <input type="number" class="form-control w-50" id="value0" placeholder=0 value=0 required>
              <button type="submit" id="submit0" class="submit-button" style="display: none;"> Enviar</button>
            </div>
          </form>
        </div>
        <div id="step-2">
          <form action="" id="my-form1"  accept-charset="utf-8">
            <div class="form-group">
              <label id="email-label" for="email">Email</label>
              <input type="email" name="email" id="email" class="form-control w-50" placeholder="Introduce tu Email"
                required >
              <div class="help-block with-errors"></div>
              <label for="value1">Coste </label>';
              <input type="number" class="form-control w-50" id="value1" placeholder=0 value=0 required>
              <button type="submit" id="submi1" class="submit-button" style="display: none;"> Enviar</button>
            </div>
          </form>
        </div>
        <div id="step-3">
          <form action="" id="my-form2"  accept-charset="utf-8">
            <div class="form-group">
              <label id="tel-label" for="phone">Telefono</label>
              <input type="tel" name="phone" id="phone" class="form-control w-50"" placeholder="Introduce tu telefono"
                required >
              <label for="value2">Coste </label>';
              <input type="number" class="form-control w-50"" id="value2" placeholder=0 value=0 required>
              <button type="submit" id="submit2" class="submit-button" style="display: none;"> Enviar</button>
            </div>
          </form>
        </div>
        <div id="step-4">
          <form action="" id="my-form3"accept-charset="utf-8">
            <div class="form-group">
              <label id="terms-label" for="terms">Estoy de acuerdo con los TyC</label>
              <input type="checkbox" name="phone" id="terms" required >
              <button type="submit" id="submit3" class="submit-button " style="display: none;"> Enviar</button>
            </div>
          </form>

        </div>
        <div id="step-5">
          

        </div>
      </div>
    </div>
  </div>

   </div> <!-- Include jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.0.min.js"
      integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="./js/jquery.smartWizard.min.js"></script>


    <script type="text/javascript">
      $(document).ready(function () {

        // Toolbar extra buttons
        var btnFinish = $('<button></button>').text('Finalizar')
          .addClass('btn ')
          .on('click', function () { 
            
            confirm('Â¿ Quieres enviar el formulario ?')


          });
        var btnCancel = $('<button></button>').text('Cancelar')
          .addClass('btn btn-danger')
          .on('click', function () {
            $('#smartwizard').smartWizard("reset");
            $('#totamount').val('');
          });

        $("#smartwizard").on("stepContent", function (e, anchorObject, stepIndex, stepDirection) {


        });

        $("#smartwizard").on("leaveStep", function (e, anchorObject, currentStepIndex, nextStepIndex,
        stepDirection) {
          let res = true;
          let eleForm = $("#my-form" + currentStepIndex)
          if (stepDirection === 'forward' && eleForm) {
            let pagebutton = $('#submit' + currentStepIndex);
            let invalidFields = eleForm.find(":invalid");

            if (!eleForm[0].checkValidity()) {
              // If the form is invalid, submit it. The form won't actually submit;
              // this will just cause the browser to display the native HTML5 error messages.
              eleForm[0].reportValidity();
              
              return false;
            }
            addToTotal(currentStepIndex);
          }
          return res;
        });

        // Smart Wizard
        $('#smartwizard').smartWizard({
          selected: 0,
          theme: 'arrows', // default, arrows, dots, progress
          // darkMode: true,
          transition: {
            animation: 'slide-horizontal', // Effect on navigation, none/fade/slide-horizontal/slide-vertical/slide-swing
          },
          toolbarSettings: {
            toolbarPosition: 'top', // both bottom
            toolbarExtraButtons: [btnFinish, btnCancel]
          },
          keyboardSettings: {
            keyNavigation: false, // Enable/Disable keyboard navigation(left and right keys are used if enabled)     
          },
          lang: { // Language variables for button
            next: 'Siguiente',
            previous: 'Anterior'
          }
        });


        // Add to TotalCounter
        function addToTotal(currentStepIndex) {
          if (currentStepIndex === 0) {
            let actCost = $('#value' + currentStepIndex).val();
            if (isNaN(actCost)) {
              actCost = 0;
            }
            $('#totamount').val(actCost);

          }else if (currentStepIndex === 3) {       
       
            
          } else {
            let actCost = $('#value' + currentStepIndex).val();
            let actTotal = $('#totamount').val();
            let res = parseFloat(actCost) + parseFloat(actTotal);
            $('#totamount').val(res);
          }
          return true;
        };



      });
    </script>
</body>

</html>